<!DOCTYPE html>
<html>
<head>
    <title>Basic Website</title>

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <!-- Function to dynamically load options for "models_selector" element -->
    <script>
        function load_seasons(seasons_dict) {
            var league = document.getElementById("leagues_selector").value;
            var seasons = seasons_dict[league];
            var selector = document.getElementById("seasons_selector");
            selector.options.length = 0;  // reset items to nothing
            for (i = 0; i < seasons.length; i++) {
                selector.options.add(new Option(seasons[i]));
            }
            var selected_season = "{{ selected_season }}";
            for (i = 0; i < seasons.length; i++) {
                if (seasons[i] == selected_season) {
                    selector.selectedIndex = i;
                }
            }
            
        }
    </script>

</head>

<body onload="load_seasons({{ seasons }})">

    <div class="container">
        <h1>Selectors <small>(select league & season)</small></h1>
        <form>
            <select name="leagues_selector" id="leagues_selector" onchange="load_seasons({{ seasons }})">
                {% for league in leagues %}
                    {% if league == selected_league %}
                    <option value="{{ league }}" selected>{{ league }}</option>
                    {% else %}
                    <option value="{{ league }}">{{ league }}</option>
                    {% endif %}
                {% endfor %}
            </select>
            <br>
            <select name="seasons_selector" id="seasons_selector"></select>
            <br>
            <input type="submit" value="Show League Table" formmethod="post">
        </form>

        {% if results %}
            <table>
                <tr><th colspan=3>{{ selected_league }} - {{ selected_season }}</th></tr>
                <tr>
                    <th>Team</th>
                    <th>Points</th>
                    <th>Goal Difference</th>
                </tr>
                {% for result in results %}
                <tr>
                    <td>{{ result.team }}</td>
                    <td>{{ result.points }}</td>
                    <td>{{ result.goal_difference }}</td>
                </tr>
                {% endfor %}
            </table>
        {% endif %}
    </div>

</body>
</html>
